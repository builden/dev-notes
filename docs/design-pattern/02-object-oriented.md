# 面向对象编程

- 面向对象编程是以类或对象作为组织代码的基本单元，并将封装、抽象、继承、多态四个特性，作为代码设计和实现的基石
- 面向对象编程语言是支持类或对象的语法机制，并有现成的语法机制，能方便地实现面向对象编程四大特性的编程语言

## 对比面向过程

- 面向过程编程是以过程(可以理解为方法、函数、操作)作为组织代码的基本单元，以数据(可以理解为成员变量、属性)与方法相分离为主要的特点。面向过程风格是一种流程化的编程风格，通过拼接一组顺序执行的方法来操作数据完成一项功能

## 面向对象的四大特性

- JS 不支持封装和继承的特性

### 1. 封装 (Encapsulation)

- 又叫信息隐藏或者数据访问保护
- 类暴露有限的访问接口，授权外部仅能通过类提供的方法来访问内部的信息或者数据
- 对于这个特性，需要编程语言本身提供一定的语法机制(访问权限控制)来支持，如在 C++里的 public, private 关键字等

#### 封装的意义

1. 如果没有封装，那任何代码都可以访问访问、修改类中的属性，虽然看起来更加灵活，但过度灵活也意味着不可控，属性可以随意被以各种奇葩的方式修改，而且修改逻辑可能散落在代码的各个角落，势必影响代码的可读性、可维护性。
2. 类仅仅通过有限的方法暴露必要的操作，也能提高类的易用性。如果我们把类属性都暴露个类的调用者，调用者想要正确地操作这些属性，就势必要对业务细节有足够的了解，这对调用者来说也是一种负担。

### 2. 抽象 (Abstraction)

- 讲的是如何隐藏方法的具体实现，让调用者只需要关心方法提供了哪些功能，并不需要知道这些功能是如何实现的
- 在面向对象编程中，我们常借助编程语言提供的接口类或者抽象类这两种语法机制，来实现抽象这一特性
- 函数本身其实就是一种抽象，所以“抽象”有时候不被看作面向对象编程的特性之一

#### 抽象的意义

- 上升到思考层面，抽象及封装都是人类处理复杂性的有效手段。在面对复杂系统时，人脑能承受的信息复杂程度是有限的，所以我们必须忽略掉一些非关键性的实现细节。而抽象作为一种只关注功能点不关注实现的设计思想，正好帮我们的大脑过滤掉许多非必要的信息

### 3. 继承 (Inheritance)

- 继承是用来表示类之间的 is-a 关系，比如猫是一种哺乳动物
- 有些语言只支持单继承，如 Java, C#, Ruby 等；有的支持多继承，如 C++, Python, Perl 等

#### 继承的意义

- 最大的好处就是代码复用
- 不过，过度使用继承、继承层次过深过复杂，会导致代码的可读性、可维护性变差。为了了解一个类，不仅要查看这个类的代码，还需要按照继承关系一层层地往上查看“父类、父类的父类...”的代码。还有，子类和父类高度耦合，修改父类的代码，会直接影响到子类

### 4. 多态 (Polymorphism)

- 子类可以替换父类

#### 实现方式

1. 继承加方法重新
2. 接口类语法
3. duck-typing (Javascript, Python)

```ts
// duck-typing
// test中的代码可以复用
// 增加一种新类型，只需要让新类型实现record方法，提升了可扩展性
class Logger {
  record() {
    console.log('logger record');
  }
}

class DB {
  record() {
    console.log('db record');
  }
}
function test(recorder) {
  recorder.record();
}

const logger = new Logger();
const db = new DB();
test(logger);
test(db);
```

#### 多态的意义

- 多态提高代码的可扩展性和复用性
- 多态是很多设计模式、设计原则、编程技巧的代码实现基础，比如策略模式、基于接口而非实现编程、依赖导致原则、里氏替换原则等等

## 面向过程的贫血模型和面向对象的充血模型
