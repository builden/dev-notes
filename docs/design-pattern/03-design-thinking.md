# 设计思想

## 1. 高内聚、松耦合

- 能够有效提高代码的可读性和可维护性，缩小功能改动导致的代码改动范围
- 很多设计原则都是以实现代码的高内聚、松耦合为目标，比如单一职责原则、基于接口而非实现编程等

### 高内聚

- 指导模块本身的设计
- 相近的功能应该放到同一个模块中，相近的功能往往会被同时修改，放在一起修改会比较集中

### 松耦合

- 指导模块与模块之间依赖关系的设计
- 一个模块的代码改动不会或很少导致依赖类的代码改动
- 依赖注入、接口隔离、基于接口而非实现编程，迪米特法则，都是为了实现代码的松耦合

## 2. 基于接口而非实现编程

- 这里的接口不是狭义的语言层面的语法，从本质上来看，“接口”就是一组“协议”或者“约定”，是功能提供者提供给使用者的一个功能列表。
- 另一种表述是基于抽象而非实现编程
- 能有效地提高代码质量，因为可以将接口和实现相分离，封装不稳定的实现，暴露稳定的接口，当实现发生变化的时候，上游系统的代码基本上不需要做改变，以此来降低耦合性，提高扩展性

### 是否需要为每个类定义接口

做任何事情都要讲求一个“度”，过度使用也会导致不必要的开发负担。这条原则设计的初衷是将接口和实现相分离，封装不稳定的实现，暴露稳定的接口，提高代码的可扩展性。在我们的业务场景中，某个功能只有一种实现方式，未来也不可能被其它实现方式替代，就没有必要为其设计接口。除此之外，如果某个系统特别稳定，开发完之后基本上不需要维护，也没必要为其扩展性，投入不必要的开发时间。

## 3. 多用组合少用继承

- 继承最大的问题：继承层次过深、继承关系过于复杂会影响到代码的可读性和可维护性。
- 如果类之间的继承结构稳定，层次比较浅，关系不复杂，我们就可以大胆使用继承

## 4. 分层

### 1. 分层能起到代码复用的作用

### 2. 分层能起到隔离变化的作用

### 3. 分层能起到隔离关注点的作用

### 4. 分层能提高代码的可测试

### 5. 分层能应对系统的复杂性

- 复杂拆分有垂直和水平两个方向，水平方式是基于业务来做拆分，就是模块化；垂直方向基于流程来做拆分，就是分层
- 不管分层、模块化、还是 OOP、DDD、已经各种设计模式、设计原则和思想，都是为了应对系统的复杂性
