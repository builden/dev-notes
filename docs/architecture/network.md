# 网络基础

## TCP 创建连接为什么要 3 次握手，而不是两次

- TCP 的可靠含义：接收方收到的数据是完整，有序，无差错的

### 场景 1：为了防止已失效的连接请求报文段突然又传送到了服务端，因而产生错误

- 客户端如果没有等到服务器返回就创建 socket，会浪费资源
- 服务器如果一收到客户端请求就创建 socket，创建的 socket 后面不会再收到数据，是个浪费

## TCP 释放连接为什么要 4 次挥手

- 第一次挥手 客户端 -> 服务端 FIN (服务端收到信息后就能确定客户端已经停止发送数据)
- 第二次挥手 服务端 -> 客户端 ACK (客户端收到消息后就能确定服务端已经知道客户端不会再发送数据)
- 第三次挥手 服务端 -> 客户端 FIN (客户端收到消息后就能确定服务端已经停止发送数据)
- 第四次挥手 客户端 -> 服务端 ACK (务端收到信息后就能确定客户端已经知道服务端不会再发送数据)

### 为什么不是 3 次

- 在客服端第 1 次挥手时，服务端可能还在发送数据。
